-- =====================================================================
-- СПРАВОЧНИК ПРЕФИКСОВ С ЧАСОВЫМИ ПОЯСАМИ (ИСПРАВЛЕННАЯ ВЕРСИЯ)
-- =====================================================================
--
-- ВАЖНО: Мобильные префиксы операторов работают по всей России!
-- Этот справочник использует статистический подход:
-- - Большинство абонентов в центральной России → Europe/Moscow (UTC+3)
-- - Это приблизительное определение для режима "auto"
-- - Для точного определения используйте режим "manual" с указанием timezone в CSV
--
-- ПРИМЕЧАНИЕ: Префиксы 951 и 953 используются обоими операторами (Билайн/Теле2),
-- но из-за UNIQUE constraint оставлены за Билайн как исторически первым владельцем
--
-- =====================================================================

DELETE FROM phone_prefix_info;

INSERT INTO phone_prefix_info (prefix, operator, timezone, region, utc_offset) VALUES

-- =====================================================================
-- МТС (20 префиксов)
-- =====================================================================
('910', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('911', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('912', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('913', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('914', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('915', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('916', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('917', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('918', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('919', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('980', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('981', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('982', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('983', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('984', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('985', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('986', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('987', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('988', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),
('989', 'МТС', 'Europe/Moscow', 'Москва и ЦФО', 3),

-- =====================================================================
-- Билайн (15 префиксов, включая 951 и 953)
-- =====================================================================
('903', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('905', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('906', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('909', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('951', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('953', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('960', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('961', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('962', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('963', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('964', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('965', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('966', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('967', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),
('968', 'Билайн', 'Europe/Moscow', 'Москва и ЦФО', 3),

-- =====================================================================
-- Мегафон (19 префиксов)
-- =====================================================================
('920', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('921', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('922', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('923', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('924', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('925', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('926', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('927', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('928', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('929', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('930', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('931', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('932', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('933', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('934', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('936', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('937', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('938', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),
('939', 'Мегафон', 'Europe/Moscow', 'Москва и ЦФО', 3),

-- =====================================================================
-- Теле2 (16 префиксов, БЕЗ 951 и 953 из-за конфликта)
-- =====================================================================
('900', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('901', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('902', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('904', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('908', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('950', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('952', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('954', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('955', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('958', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('977', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('991', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('992', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('993', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('994', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3),
('995', 'Теле2', 'Europe/Moscow', 'Москва и ЦФО', 3);

-- =====================================================================
-- Проверка
-- =====================================================================
SELECT
    operator,
    COUNT(*) as prefix_count,
    timezone,
    region
FROM phone_prefix_info
GROUP BY operator, timezone, region
ORDER BY operator;

-- Ожидаемый результат:
-- Билайн:  15 префиксов (Europe/Moscow, Москва и ЦФО)
-- Мегафон: 19 префиксов (Europe/Moscow, Москва и ЦФО)
-- МТС:     20 префиксов (Europe/Moscow, Москва и ЦФО)
-- Теле2:   16 префиксов (Europe/Moscow, Москва и ЦФО)
-- ИТОГО:   70 уникальных префиксов

SELECT COUNT(*) as total_prefixes FROM phone_prefix_info;
-- Должно быть: 70
